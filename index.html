<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EdFile Registry</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.2/dist/slate/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" rel="stylesheet">
</head>

<body>
<div class="container-xl mt-4">
  <h3>EdFile Registry (TTGames)</h3>

  <table id="table" class="table table-striped table-hover table-bordered w-100">
    <thead>
      <tr id="thead"></tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>

<script>
fetch('./EdRegistry.csv')
  .then(r => r.text())
  .then(csv => {
    const parsed = Papa.parse(csv, {
      header: true,
      skipEmptyLines: true
    });

    const columns = Object.keys(parsed.data[0]);

    columns.forEach(c => {
      document.getElementById('thead').insertAdjacentHTML('beforeend', `<th>${c}</th>`);
    });

    $('#table').DataTable({
      data: parsed.data,
      pageLength: 100,
      columns: columns.map(c => ({ data: c }))
    });
  });
</script>

</body>
</html>
