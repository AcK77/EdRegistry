<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>EdRegistry</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.2/dist/slate/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" rel="stylesheet">
  <style>
    body {
      font-size: 0.9rem;
    }

    .container-custom {
      max-width: 1600px;
      padding-left: 1rem;
      padding-right: 1rem;
      margin: auto;
    }

    table.dataTable {
      font-size: 0.85rem;
    }

    .stat-card {
      background: #272b30;
      border-radius: 0.5rem;
      padding: 1rem;
      height: 100%;
    }

    .stat-title {
      font-size: 0.8rem;
      opacity: 0.75;
      margin-bottom: 0.25rem;
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 600;
    }

    footer {
      border-top: 1px solid rgba(255,255,255,0.1);
      font-size: 0.8rem;
      opacity: 0.8;
    }
  </style>
</head>
<body>

<div class="container-custom mt-4">

  <h4 class="mb-3">ðŸ“‚ Data Registry</h4>

  <table id="mainTable" class="table table-striped table-hover table-bordered w-100">
    <thead>
      <tr>
        <th>Category</th>
        <th>Name</th>
        <th>Type</th>
        <th>Size</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      <script>
        for (let i = 1; i <= 500; i++) {
          document.write(`
            <tr>
              <td>Document</td>
              <td>File_${i}.pdf</td>
              <td>PDF</td>
              <td>${Math.floor(Math.random() * 5000)} KB</td>
              <td>2025-01-${(i % 28 + 1).toString().padStart(2, '0')}</td>
            </tr>
          `);
        }
      </script>
    </tbody>
  </table>

  <div class="row g-3 mt-4">
    <div class="col-md-3">
      <div class="stat-card">
        <div class="stat-title">Total files</div>
        <div class="stat-value" id="statTotal">0</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="stat-card">
        <div class="stat-title">Displayed</div>
        <div class="stat-value" id="statFiltered">0</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="stat-card">
        <div class="stat-title">Unique categories</div>
        <div class="stat-value" id="statCategories">0</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="stat-card">
        <div class="stat-title">File types</div>
        <div class="stat-value" id="statTypes">0</div>
      </div>
    </div>
  </div>

</div>

<footer class="mt-5 py-3 text-center">
  <div>Data Registry Â· Local Viewer Â· No tracking</div>
</footer>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>

<script>
  $(document).ready(function () {
    const table = $('#mainTable').DataTable({
      pageLength: 100,
      lengthMenu: [25, 50, 100, 250, 500],
      order: [[1, 'asc']],
      dom:
        "<'row mb-3'<'col-md-6'l><'col-md-6 text-end'f>>" +
        "<'row'<'col-12'tr>>" +
        "<'row mt-3'<'col-md-5'i><'col-md-7 text-end'p>>"
    });

    function updateStats() {
      const total = table.data().count();
      const filtered = table.rows({ filter: 'applied' }).count();

      const categories = new Set();
      const types = new Set();

      table.rows({ filter: 'applied' }).every(function () {
        const d = this.data();
        categories.add(d[0]);
        types.add(d[2]);
      });

      $('#statTotal').text(total);
      $('#statFiltered').text(filtered);
      $('#statCategories').text(categories.size);
      $('#statTypes').text(types.size);
    }

    updateStats();
    table.on('draw', updateStats);
  });
</script>

</body>
</html>
